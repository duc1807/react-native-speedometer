{"version":3,"file":"react-native-speedometer.min.js","sources":["../src/index.js"],"sourcesContent":["/* eslint import/no-unresolved: [2, { ignore: ['react-native', 'react'] }] */\r\n/* eslint radix: [\"error\", \"as-needed\"] */\r\nimport React, { Component } from 'react';\r\nimport {\r\n  View,\r\n  Image,\r\n  Animated,\r\n  Easing,\r\n  Text,\r\n} from 'react-native';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Utils\r\nimport calculateDegreeFromLabels from './utils/calculate-degree-from-labels';\r\nimport calculateLabelFromValue from './utils/calculate-label-from-value';\r\nimport limitValue from './utils/limit-value';\r\nimport validateSize from './utils/validate-size';\r\n\r\n// Style\r\nimport style, { width as deviceWidth } from './style';\r\n\r\n// eslint-disable-next-line react/prefer-stateless-function\r\nclass Speedometer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.speedometerValue = new Animated.Value(props.defaultValue);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      value,\r\n      size,\r\n      minValue,\r\n      maxValue,\r\n      easeDuration,\r\n      allowedDecimals,\r\n      labels,\r\n      needleImage,\r\n      wrapperStyle,\r\n      outerCircleStyle,\r\n      halfCircleStyle,\r\n      imageWrapperStyle,\r\n      imageStyle,\r\n      innerCircleStyle,\r\n      labelWrapperStyle,\r\n      labelStyle,\r\n      labelNoteStyle,\r\n      useNativeDriver,\r\n    } = this.props;\r\n    const degree = 180;\r\n    const perLevelDegree = calculateDegreeFromLabels(degree, labels);\r\n    const label = calculateLabelFromValue(\r\n      limitValue(value, minValue, maxValue, allowedDecimals), labels, minValue, maxValue,\r\n    );\r\n    Animated.timing(\r\n      this.speedometerValue,\r\n      {\r\n        toValue: limitValue(value, minValue, maxValue, allowedDecimals),\r\n        duration: easeDuration,\r\n        easing: Easing.linear,\r\n        useNativeDriver,\r\n      },\r\n    ).start();\r\n\r\n    const rotate = this.speedometerValue.interpolate({\r\n      inputRange: [minValue, maxValue],\r\n      outputRange: ['-90deg', '90deg'],\r\n    });\r\n\r\n    const currentSize = validateSize(size, deviceWidth - 20);\r\n    return (\r\n      <View style={[style.wrapper, {\r\n        width: currentSize,\r\n        height: currentSize / 2,\r\n      }, wrapperStyle]}\r\n      >\r\n        <View style={[style.outerCircle, {\r\n          width: currentSize,\r\n          height: currentSize / 2,\r\n          borderTopLeftRadius: currentSize / 2,\r\n          borderTopRightRadius: currentSize / 2,\r\n        }, outerCircleStyle]}\r\n        >\r\n          {labels.map((level, index) => {\r\n            const circleDegree = 90 + (index * perLevelDegree);\r\n            return (\r\n              <View\r\n                key={level.name}\r\n                style={[style.halfCircle, {\r\n                  backgroundColor: level.activeBarColor,\r\n                  width: currentSize / 2,\r\n                  height: currentSize,\r\n                  borderRadius: currentSize / 2,\r\n                  transform: [\r\n                    { translateX: currentSize / 4 },\r\n                    { rotate: `${circleDegree}deg` },\r\n                    { translateX: (currentSize / 4 * -1) },\r\n                  ],\r\n                }, halfCircleStyle]}\r\n              />\r\n            );\r\n          })}\r\n          <Animated.View style={[style.imageWrapper,\r\n            {\r\n              top: -(currentSize / 15),\r\n              transform: [{ rotate }],\r\n            },\r\n            imageWrapperStyle]}\r\n          >\r\n            <Image\r\n              style={[style.image,\r\n                {\r\n                  width: currentSize,\r\n                  height: currentSize,\r\n                }, imageStyle]}\r\n              source={needleImage}\r\n            />\r\n          </Animated.View>\r\n          <View style={[style.innerCircle, {\r\n            width: currentSize * 0.6,\r\n            height: (currentSize / 2) * 0.6,\r\n            borderTopLeftRadius: currentSize / 2,\r\n            borderTopRightRadius: currentSize / 2,\r\n          }, innerCircleStyle]}\r\n          />\r\n        </View>\r\n        <View style={[style.labelWrapper, labelWrapperStyle]}>\r\n          <Text style={\r\n            [style.label, labelStyle]}\r\n          >\r\n            {limitValue(value, minValue, maxValue, allowedDecimals)}\r\n          </Text>\r\n          <Text style={\r\n            [style.labelNote, { color: label.labelColor }, labelNoteStyle]}\r\n          >\r\n            {label.name}\r\n          </Text>\r\n        </View>\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\nSpeedometer.defaultProps = {\r\n  defaultValue: 50,\r\n  minValue: 0,\r\n  maxValue: 100,\r\n  easeDuration: 500,\r\n  allowedDecimals: 0,\r\n  labels: [\r\n    {\r\n      name: 'Pathetically weak',\r\n      labelColor: '#ff2900',\r\n      activeBarColor: '#ff2900',\r\n    },\r\n    {\r\n      name: 'Very weak',\r\n      labelColor: '#ff5400',\r\n      activeBarColor: '#ff5400',\r\n    },\r\n    {\r\n      name: 'So-so',\r\n      labelColor: '#f4ab44',\r\n      activeBarColor: '#f4ab44',\r\n    },\r\n    {\r\n      name: 'Fair',\r\n      labelColor: '#f2cf1f',\r\n      activeBarColor: '#f2cf1f',\r\n    },\r\n    {\r\n      name: 'Strong',\r\n      labelColor: '#14eb6e',\r\n      activeBarColor: '#14eb6e',\r\n    },\r\n    {\r\n      name: 'Unbelievably strong',\r\n      labelColor: '#00ff6b',\r\n      activeBarColor: '#00ff6b',\r\n    },\r\n  ],\r\n  needleImage: require('../images/needle2.png'),\r\n  wrapperStyle: {},\r\n  outerCircleStyle: {},\r\n  halfCircleStyle: {},\r\n  imageWrapperStyle: {},\r\n  imageStyle: {},\r\n  innerCircleStyle: {},\r\n  labelWrapperStyle: {},\r\n  labelStyle: {},\r\n  labelNoteStyle: {},\r\n  useNativeDriver: true,\r\n};\r\n\r\nSpeedometer.propTypes = {\r\n  value: PropTypes.number.isRequired,\r\n  defaultValue: PropTypes.number,\r\n  size: PropTypes.number,\r\n  minValue: PropTypes.number,\r\n  maxValue: PropTypes.number,\r\n  easeDuration: PropTypes.number,\r\n  allowedDecimals: PropTypes.number,\r\n  labels: PropTypes.array,\r\n  needleImage: PropTypes.any,\r\n  wrapperStyle: PropTypes.object,\r\n  outerCircleStyle: PropTypes.object,\r\n  halfCircleStyle: PropTypes.object,\r\n  imageWrapperStyle: PropTypes.object,\r\n  imageStyle: PropTypes.object,\r\n  innerCircleStyle: PropTypes.object,\r\n  labelWrapperStyle: PropTypes.object,\r\n  labelStyle: PropTypes.object,\r\n  labelNoteStyle: PropTypes.object,\r\n  useNativeDriver: PropTypes.bool,\r\n};\r\n\r\nexport default Speedometer;\r\n"],"names":["Speedometer","props","speedometerValue","Animated","Value","defaultValue","render","this","value","size","minValue","maxValue","easeDuration","allowedDecimals","labels","needleImage","wrapperStyle","outerCircleStyle","halfCircleStyle","imageWrapperStyle","imageStyle","innerCircleStyle","labelWrapperStyle","labelStyle","labelNoteStyle","useNativeDriver","perLevelDegree","calculateDegreeFromLabels","label","calculateLabelFromValue","limitValue","timing","toValue","duration","easing","Easing","linear","start","rotate","interpolate","inputRange","outputRange","currentSize","validateSize","deviceWidth","React","View","style","wrapper","width","height","outerCircle","borderTopLeftRadius","borderTopRightRadius","map","level","index","circleDegree","key","name","halfCircle","backgroundColor","activeBarColor","borderRadius","transform","translateX","imageWrapper","top","Image","image","source","innerCircle","labelWrapper","Text","labelNote","color","labelColor","Component","defaultProps","require","propTypes","PropTypes","number","isRequired","array","any","object","bool"],"mappings":"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"}